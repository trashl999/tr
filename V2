-- Mouse Aimbot | Head | Hold T

local Aimbot = {}

function Aimbot.Load()
	local Players = game:GetService("Players")
	local RunService = game:GetService("RunService")
	local UserInputService = game:GetService("UserInputService")
	local Camera = workspace.CurrentCamera

	local LocalPlayer = Players.LocalPlayer
	local Running = false
	local LockPart = "Head"
	local LockedPart = nil
	local MaxStep = 15 -- controla forÃ§a

	local function getClosest()
		local closest, dist = nil, math.huge
		for _, p in pairs(Players:GetPlayers()) do
			if p ~= LocalPlayer and p.Character then
				local part = p.Character:FindFirstChild(LockPart)
				local hum = p.Character:FindFirstChildOfClass("Humanoid")
				if part and hum and hum.Health > 0 then
					local pos, on = Camera:WorldToViewportPoint(part.Position)
					if on then
						local d = (UserInputService:GetMouseLocation() - Vector2.new(pos.X, pos.Y)).Magnitude
						if d < dist then
							dist, closest = d, part
						end
					end
				end
			end
		end
		return closest
	end

	RunService.RenderStepped:Connect(function()
		if not Running then return end

		if not LockedPart then
			LockedPart = getClosest()
		end
		if not LockedPart then return end

		local pos = Camera:WorldToViewportPoint(LockedPart.Position)
		local mouse = UserInputService:GetMouseLocation()

		local dx = pos.X - mouse.X
		local dy = pos.Y - mouse.Y

		dx = math.clamp(dx, -MaxStep, MaxStep)
		dy = math.clamp(dy, -MaxStep, MaxStep)

		mousemoverel(dx, dy)
	end)

	UserInputService.InputBegan:Connect(function(i)
		if i.KeyCode == Enum.KeyCode.T then
			Running = true
			LockedPart = nil
		end
	end)

	UserInputService.InputEnded:Connect(function(i)
		if i.KeyCode == Enum.KeyCode.T then
			Running = false
			LockedPart = nil
		end
	end)
end

Aimbot.Load()
return Aimbot
